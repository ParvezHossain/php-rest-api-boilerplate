<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <style>
      .login-btn {
        background-color: #007bff;
        color: #fff;
      }
      .get-btn {
        background-color: green;
        color: white;
      }

      .post-btn {
        background-color: blue;
        color: white;
      }

      .delete-btn {
        background-color: red;
        color: white;
      }

      .put-btn {
        background-color: orange;
        color: white;
      }
      button {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <button id="login" class="login-btn">Login</button>
    <button id="getUser" class="get-btn">Get Users</button>
    <button id="saveUser" class="post-btn">Save User</button>
    <button id="deleteUser" class="delete-btn">Delete User</button>
    <button id="updateUser" class="put-btn">Update User</button>

    <script>
      $(document).ready(function () {
        $("#login").click(function () {
          $.ajax({
            url: "index.php/v1/login",
            type: "POST",
            data: JSON.stringify({
              user_name: "phossain",
              password: "phossain",
            }),
            headers: {
              "Content-Type": "application/json",
            },
            success: function (token) {
              localStorage.setItem("php-token", token);
              console.log(token);
            },
            error: function (xhr, status, error) {
              console.log(error);
            },
          });
        });

        $("#getUser").click(function () {
          $.ajax({
            url: "index.php/v1/users/",
            type: "GET",
            headers: {
              Authorization: "Bearer " + localStorage.getItem("php-token"),
              "Content-Type": "application/json",
            },
            success: function (res) {
              console.log(res);
            },
            error: function (xhr, status, error) {
              console.log(error);
            },
          });
        });

        $("#saveUser").click(function () {
          $.ajax({
            url: "index.php/v1/users",
            type: "POST",
            headers: {
              "Content-type": "application/json",
            },
            data: JSON.stringify({
              name: "Parvez Hossain",
              user_name: "phossain",
              gender: "Male",
              email: "parvezhossain724@gmail.com",
              password: "phossain",
            }),
            success: function (response) {
              console.log(response);
            },
            error: function (xhr, status, error) {
              console.log(error);
            },
          });
        });
      });

      $("#updateUser").click(function () {
        $.ajax({
          url: "index.php/v1/users/1",
          type: "PUT",
          headers: {
            Authorization: "Bearer " + localStorage.getItem("php-token"),
            "Content-Type": "application/json",
          },
          data: JSON.stringify({
            name: "Parvez Hossain",
            user_name: "phossain_v2",
            gender: "Male",
            email: "parvezhossain724@gmail.com",
          }),
          success: function (response) {
            console.log("User updated successfully:", response);
          },
          error: function (xhr, status, error) {
            console.error("Error updating user:", error);
          },
        });
      });

      $("#deleteUser").click(function () {
        $.ajax({
          url: "index.php/v1/users/1",
          type: "DELETE",
          headers: {
            Authorization: "Bearer " + localStorage.getItem("php-token"),
            "Content-Type": "application/json",
          },
          success: function (result) {
            console.log("User deleted successfully");
          },
          error: function (xhr, status, error) {
            console.log("Error deleting user: " + error);
          },
        });
      });
    </script>
  </body>
</html>
